function swapPairs(head) {
    // 1. Базовий випадок: якщо список порожній або має лише один вузол,
    // міняти місцями нічого, повертаємо head як є.
    if (!head || !head.next) {
        return head;
    }

    // 2. Новою головою списку стане другий вузол, оскільки перший і другий міняються місцями.
    const newHead = head.next;

    let prev = null;       // Вказівник на останній вузол попередньої пари
    let current = head;    // Вказівник на початок поточної пари

    // 3. Проходимо циклом, поки є поточний вузол і наступний за ним (тобто є пара)
    while (current && current.next) {
        const first = current;
        const second = current.next;
        const nextPair = second.next; // Зберігаємо посилання на початок наступної пари

        // --- ЕТАП ОБМІНУ ---
        
        // Другий вузол тепер вказує на перший
        second.next = first;
        
        // Перший вузол тепер вказує на початок наступної пари (або null)
        first.next = nextPair;

        // Якщо це не перша пара, зв'язуємо хвіст попередньої пари з новою головою поточної (second)
        if (prev) {
            prev.next = second;
        }

        // --- ПІДГОТОВКА ДО НАСТУПНОЇ ІТЕРАЦІЇ ---
        
        // Тепер 'first' став другим у цій парі, тому він буде 'prev' для наступної пари
        prev = first;
        // Переходимо до наступної пари
        current = nextPair;
    }

    // Повертаємо нову голову списку
    return newHead;
}

module.exports = swapPairs;