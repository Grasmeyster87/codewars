<div class="markdown prose max-w-none mb-8" id="description"><p>You are given a string and a transformation pattern (an array of operations). Your task is to apply the operations in order to the string and return the final result.</p>
<p>Each operation in the pattern is one of:</p>
<p>"U" ‚Üí convert the string to uppercase</p>
<p>"L" ‚Üí convert the string to lowercase</p>
<p>"R" ‚Üí reverse the string</p>
<p>"D" ‚Üí duplicate <strong>each</strong> character (e.g., "abc" ‚Üí "aabbcc", "qqbbcc" ‚Üí "qqqqbbbbcccc")</p>
<pre><code>stringTransformation("abcd", ["U","R"]) // "DCBA"
// "abcd" ‚Üí "ABCD" ‚Üí "DCBA"

stringTransformation("abc", ["D","L"]) // "aabbcc"
// "abc" ‚Üí "aabbcc" ‚Üí "aabbcc" (lowercase already applied)

stringTransformation("AbCd", ["L","R"]) // "dcba"
// "AbCd" ‚Üí "abcd" ‚Üí "dcba"
</code></pre>

<p><em><strong>Note</strong></em>:</p>
<p>Input string length is <strong>1 &lt;= n &lt;= 10^5</strong>, length of transformations is <strong>0 &lt;= n &lt;= 10^5</strong>, in all tests is guaranteed that the string will be <strong>not longer than 10^8</strong>.</p>
</div>

<br><hr><br>

<div class="markdown prose max-w-none mb-8" id="description"><p>–í–∞–º –¥–∞–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –∏ —à–∞–±–ª–æ–Ω –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (–º–∞—Å—Å–∏–≤ –æ–ø–µ—Ä–∞—Ü–∏–π). –í–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫ —Å—Ç—Ä–æ–∫–µ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –≤–µ—Ä–Ω—É—Ç—å –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>
<p>–ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –≤ —à–∞–±–ª–æ–Ω–µ ‚Äî –æ–¥–Ω–∞ –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö:</p>
<p>"U" ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä</p>
<p>"L" ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä</p>
<p>"R" ‚Üí –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É</p>
<p>"D" ‚Üí –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å <strong>–∫–∞–∂–¥—ã–π</strong> —Å–∏–º–≤–æ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, "abc" ‚Üí "aabbcc", "qqbbcc" ‚Üí "qqqqbbbbcccc")</p>
<pre><code>stringTransformation("abcd", ["U","R"]) // "DCBA"
// "abcd" ‚Üí "ABCD" ‚Üí "DCBA"

stringTransformation("abc", ["D","L"]) // "aabbcc"
// "abc" ‚Üí "aabbcc" ‚Üí "aabbcc" (—Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã)

stringTransformation("AbCd", ["L","R"]) // "dcba"
// "AbCd" ‚Üí "abcd" ‚Üí "dcba"
</code></pre>

<p><em><strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</strong></em>:</p>
<p>–î–ª–∏–Ω–∞ –≤—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ <strong>1 <= n <= 10^5</strong>, –¥–ª–∏–Ω–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π <strong>0 <= n <= 10^5</strong>, –≤–æ –≤—Å–µ—Ö —Ç–µ—Å—Ç–∞—Ö –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ –±—É–¥–µ—Ç <strong>–Ω–µ –¥–ª–∏–Ω–Ω–µ–µ 10^8</strong>.</p>
</div>

–¢—ã –Ω–∞–ø–∏—Å–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –Ω–æ –æ–Ω–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –¥–ª—è **–±–æ–ª—å—à–∏—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**.  
–ü—Ä–∏—á–∏–Ω–∞ —Ç–∞–π–º-–∞—É—Ç–∞: —Ç–≤–æ–π –∫–æ–¥ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –¥–µ–ª–∞–µ—Ç `split('').map(...).join('')` –∏–ª–∏ `split('').reverse().join('')`, —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ –º–∞—Å—Å–∏–≤—ã –∏ —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω–æ–π –¥–æ \(10^8\). –ü—Ä–∏ –¥–ª–∏–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —ç—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ –∏ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏.

### üîë –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

–ù—É–∂–Ω–æ –∏–∑–±–µ–≥–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ:

1. **–û—Ç–ª–æ–∂–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏** –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ñ–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è**:
    - `isUpper` / `isLower` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä.
    - `isReversed` ‚Äî –Ω—É–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å.
    - `dupCount` ‚Äî —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ 2 –æ–ø–µ—Ä–∞—Ü–∏–π `D` ‚Üí –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª √ó4).
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∫–æ–Ω—Ü–µ.

---

### –ü—Ä–∏–º–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

```js
function stringTransformation(str, transformations) {
    let isUpper = false;
    let isLower = false;
    let isReversed = false;
    let dupCount = 1;

    for (let t of transformations) {
        if (t === 'U') {
            isUpper = true;
            isLower = false;
        } else if (t === 'L') {
            isLower = true;
            isUpper = false;
        } else if (t === 'R') {
            isReversed = !isReversed;
        } else if (t === 'D') {
            dupCount *= 2;
        }
    }

    // –ø—Ä–∏–º–µ–Ω—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä
    if (isUpper) str = str.toUpperCase();
    if (isLower) str = str.toLowerCase();

    // –ø—Ä–∏–º–µ–Ω—è–µ–º —Ä–∞–∑–≤–æ—Ä–æ—Ç
    if (isReversed) str = str.split('').reverse().join('');

    // –ø—Ä–∏–º–µ–Ω—è–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
    if (dupCount > 1) {
        let result = [];
        for (let ch of str) {
            result.push(ch.repeat(dupCount));
        }
        str = result.join('');
    }

    return str;
}
module.exports = stringTransformation;
```

---

### ‚ö° –ü–æ—á–µ–º—É —ç—Ç–æ –±—ã—Å—Ç—Ä–µ–µ

-   –ú—ã –Ω–µ –¥–µ–ª–∞–µ–º –ª–∏—à–Ω–∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ.
-   `R` –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ñ–ª–∞–≥, –∞ –Ω–µ –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∫–∞–∂–¥—ã–π —Ä–∞–∑.
-   `U` –∏ `L` –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∫–æ–Ω—Ü–µ.
-   `D` —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Å—Ç–µ–ø–µ–Ω—å \(2^k\), –∞ –Ω–µ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

### üìä –°–ª–æ–∂–Ω–æ—Å—Ç—å

-   –í —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ: \(O(n \cdot dupCount)\), –≥–¥–µ `dupCount` ‚Äî –∏—Ç–æ–≥–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
-   –ù–æ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∑–∞ \(O(m)\), –≥–¥–µ \(m\) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤, –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∫–æ–ø–∏–π —Å—Ç—Ä–æ–∫–∏.

---

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –µ—â—ë –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –≥–¥–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∂–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ª–µ–Ω–∏–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä), —á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –¥–ª–∏–Ω–æ–π \(10^8\) —Å—Ä–∞–∑—É?

–û—Ç–ª–∏—á–Ω–æ üöÄ  
–î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º ¬´–ª–µ–Ω–∏–≤—É—é¬ª –≤–µ—Ä—Å–∏—é, –≥–¥–µ –º—ã –Ω–µ —Å–æ–∑–¥–∞—ë–º —Å—Ä–∞–∑—É –æ–≥—Ä–æ–º–Ω—É—é —Å—Ç—Ä–æ–∫—É –¥–ª–∏–Ω–æ–π \(10^8\), –∞ —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –≠—Ç–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ **–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä** –∏–ª–∏ ¬´–ª–µ–Ω–∏–≤—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä¬ª ‚Äî –æ–Ω –±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º, –ø—Ä–∏–º–µ–Ω—è—è –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –ª–µ—Ç—É.

---

### üîß –ò–¥–µ—è

1. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É, –º—ã —Ö—Ä–∞–Ω–∏–º **–∏—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ —Å–∏–º–≤–æ–ª–∞–º**.
2. –ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞:
    - `U` / `L` ‚Üí –æ–±—ë—Ä—Ç–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –º–µ–Ω—è–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä —Å–∏–º–≤–æ–ª–∞ –ø—Ä–∏ –≤—ã–¥–∞—á–µ.
    - `R` ‚Üí –º–µ–Ω—è–µ–º –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞ (–∏—Ç–µ—Ä–∞—Ç–æ—Ä –∏–¥—ë—Ç —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ).
    - `D` ‚Üí –ø—Ä–∏ –≤—ã–¥–∞—á–µ –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –ø–æ–≤—Ç–æ—Ä—è–µ–º –µ–≥–æ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑.
3. –í –∫–æ–Ω—Ü–µ –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫—É (`Array.from(iterator).join('')`), –Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

---

### üìÑ –ö–æ–¥

```js
function* stringIterator(str) {
    for (let ch of str) yield ch;
}

function stringTransformation(str, transformations) {
    let dupCount = 1;
    let isReversed = false;
    let caseTransform = null; // 'upper' | 'lower' | null

    for (let t of transformations) {
        if (t === 'U') {
            caseTransform = 'upper';
        } else if (t === 'L') {
            caseTransform = 'lower';
        } else if (t === 'R') {
            isReversed = !isReversed;
        } else if (t === 'D') {
            dupCount *= 2;
        }
    }

    // —Å–æ–∑–¥–∞—ë–º –∏—Ç–µ—Ä–∞—Ç–æ—Ä
    let chars = isReversed ? [...str].reverse() : [...str];

    // –ø—Ä–∏–º–µ–Ω—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä
    if (caseTransform === 'upper') {
        chars = chars.map((c) => c.toUpperCase());
    } else if (caseTransform === 'lower') {
        chars = chars.map((c) => c.toLowerCase());
    }

    // –ª–µ–Ω–∏–≤–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
    function* duplicateIterator(arr, times) {
        for (let ch of arr) {
            for (let i = 0; i < times; i++) yield ch;
        }
    }

    return Array.from(duplicateIterator(chars, dupCount)).join('');
}

module.exports = stringTransformation;
```

---

### ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

-   –ú—ã **–Ω–µ –∫–æ–ø–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ**.
-   –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–≤–µ–¥–µ–Ω—ã –∫ –æ–¥–Ω–æ–º—É –ø—Ä–æ—Ö–æ–¥—É.
-   –î–∞–∂–µ –ø—Ä–∏ 100k –æ–ø–µ—Ä–∞—Ü–∏–π `R` –∏–ª–∏ `U/L` –º—ã –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ñ–ª–∞–≥–∏.
-   –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Å—Ç–µ–ø–µ–Ω—å \(2^k\), –∞ –Ω–µ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

üëâ –•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –µ—â—ë –±–æ–ª–µ–µ ¬´—Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–π¬ª –≤–∞—Ä–∏–∞–Ω—Ç, –≥–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∫—É—Å–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ 1‚ÄØ–ú–ë), —á—Ç–æ–±—ã –≤–æ–æ–±—â–µ –Ω–µ —Å–æ–±–∏—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Ü–µ–ª–∏–∫–æ–º –≤ –ø–∞–º—è—Ç–∏?
–ü–æ–Ω—è–ª üëç  
–ü—Ä–∏—á–∏–Ω–∞ —Ç–∞–π–º‚Äë–∞—É—Ç–∞ –≤ —Ç–æ–º, —á—Ç–æ –¥–∞–∂–µ ¬´–ª–µ–Ω–∏–≤—ã–π¬ª –≤–∞—Ä–∏–∞–Ω—Ç –≤ –∫–æ–Ω—Ü–µ –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Ü–µ–ª–∏–∫–æ–º (`Array.from(...).join('')`). –ï—Å–ª–∏ –∏—Ç–æ–≥–æ–≤–∞—è –¥–ª–∏–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ **10^8 —Å–∏–º–≤–æ–ª–æ–≤**, —Ç–æ —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–∞–º—è—Ç–∏ ‚Äî —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ—Å—Ç–æ –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç.

---

## üîë –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏

-   **–ù–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å `reverse` –∫–∞–∂–¥—ã–π —Ä–∞–∑** ‚Üí –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–ª–∞–≥ `isReversed`.
-   **–ù–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å `toUpperCase`/`toLowerCase` –∫–∞–∂–¥—ã–π —Ä–∞–∑** ‚Üí —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–ª–∞–≥ `caseTransform`.
-   **–ù–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ** ‚Üí —Ö—Ä–∞–Ω–∏—Ç—å —Å—á—ë—Ç—á–∏–∫ `dupCount = 2^k`.

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ –∫—É—Å–∫–∞–º

–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–æ–±–∏—Ä–∞—Ç—å –≤—Å—é —Å—Ç—Ä–æ–∫—É –≤ –ø–∞–º—è—Ç–∏, –º–æ–∂–Ω–æ –≤—ã–¥–∞–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç **—á–∞—Å—Ç—è–º–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ 1‚ÄØ–ú–ë). –≠—Ç–æ —Å–Ω–∏–º–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –¥–ª–∏–Ω–æ–π –≤ —Å–æ—Ç–Ω–∏ –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤.

---

## ‚ö° –ü—Ä–∏–º–µ—Ä ¬´—Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ¬ª —Ä–µ—à–µ–Ω–∏—è

```js
function* transformGenerator(str, transformations) {
    let isUpper = false;
    let isLower = false;
    let isReversed = false;
    let dupCount = 1;

    for (let t of transformations) {
        if (t === 'U') {
            isUpper = true;
            isLower = false;
        } else if (t === 'L') {
            isLower = true;
            isUpper = false;
        } else if (t === 'R') {
            isReversed = !isReversed;
        } else if (t === 'D') {
            dupCount *= 2;
        }
    }

    let chars = isReversed ? [...str].reverse() : [...str];

    for (let ch of chars) {
        if (isUpper) ch = ch.toUpperCase();
        if (isLower) ch = ch.toLowerCase();
        for (let i = 0; i < dupCount; i++) {
            yield ch;
        }
    }
}

// –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: —Å–æ–±–∏—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫—É—Å–∫–∞–º–∏
function stringTransformation(str, transformations) {
    const gen = transformGenerator(str, transformations);
    let buffer = [];
    let result = '';

    for (let ch of gen) {
        buffer.push(ch);
        if (buffer.length >= 1e6) {
            // —Å–æ–±–∏—Ä–∞—Ç—å –ø–æ 1–ú —Å–∏–º–≤–æ–ª–æ–≤
            result += buffer.join('');
            buffer = [];
        }
    }
    if (buffer.length) result += buffer.join('');
    return result;
}

module.exports = stringTransformation;
```

---

## üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

-   –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑**.
-   –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Å—Ç–µ–ø–µ–Ω—å \(2^k\).
-   –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è **–ø–æ—Ä—Ü–∏—è–º–∏**, –∞ –Ω–µ —Å—Ä–∞–∑—É —Ü–µ–ª–∏–∫–æ–º.
-   –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ —Ç–∞–π–º‚Äë–∞—É—Ç–∞ –∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–º—è—Ç–∏.

---

üëâ –•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –≤–∞—Ä–∏–∞–Ω—Ç, –≥–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–æ–±—â–µ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, –∞ –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –µ–≥–æ –∫–∞–∫ –ø–æ—Ç–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∏—Å–∞—Ç—å —Å—Ä–∞–∑—É –≤ —Ñ–∞–π–ª –∏–ª–∏ –≤ —Å–µ—Ç—å)? –≠—Ç–æ –±—É–¥–µ—Ç –µ—â—ë –Ω–∞–¥—ë–∂–Ω–µ–µ –¥–ª—è ¬´–º–µ–≥–∞‚Äë—Ç–µ—Å—Ç–æ–≤¬ª.
